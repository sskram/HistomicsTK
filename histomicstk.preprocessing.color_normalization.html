

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>histomicstk.preprocessing.color_normalization &mdash; HistomicsTK 0.1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="histomicstk.filters" href="histomicstk.filters.html" />
    <link rel="prev" title="histomicstk.preprocessing.color_deconvolution" href="histomicstk.preprocessing.color_deconvolution.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> HistomicsTK
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="api-docs.html">API Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="histomicstk.html">histomicstk</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="histomicstk.utils.html">utils</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="histomicstk.preprocessing.html">preprocessing</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="histomicstk.preprocessing.color_conversion.html">color space conversion</a></li>
<li class="toctree-l4"><a class="reference internal" href="histomicstk.preprocessing.color_deconvolution.html">color deconvolution</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">color normalization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="histomicstk.filters.html">filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="histomicstk.segmentation.html">segmentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="histomicstk.features.html">features</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Credits</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">HistomicsTK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="api-docs.html">API Documentation</a> &raquo;</li>
        
          <li><a href="histomicstk.html">histomicstk</a> &raquo;</li>
        
          <li><a href="histomicstk.preprocessing.html">histomicstk.preprocessing</a> &raquo;</li>
        
      <li>histomicstk.preprocessing.color_normalization</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/histomicstk.preprocessing.color_normalization.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="module-histomicstk.preprocessing.color_normalization">
<span id="histomicstk-preprocessing-color-normalization"></span><h1>histomicstk.preprocessing.color_normalization<a class="headerlink" href="#module-histomicstk.preprocessing.color_normalization" title="Permalink to this headline">¶</a></h1>
<p>This package contains functions to correct non-uniform staining issues in
histopathology images.</p>
<dl class="function">
<dt id="histomicstk.preprocessing.color_normalization.background_intensity">
<code class="descclassname">histomicstk.preprocessing.color_normalization.</code><code class="descname">background_intensity</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/histomicstk/preprocessing/color_normalization/background_intensity.html#background_intensity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#histomicstk.preprocessing.color_normalization.background_intensity" title="Permalink to this definition">¶</a></dt>
<dd><p>Sample the background of the slide identified by slide_path to
compute the background intensities in the RGB channels.  Arguments
are as in histomicstk.utils.sample_pixels, with background forced
to True.</p>
<p class="rubric">Notes</p>
<p>The <cite>magnification</cite> parameter defaults to 1.25x, instead of the
native scan magnification as in sample_pixels.</p>
</dd></dl>

<dl class="function">
<dt id="histomicstk.preprocessing.color_normalization.reinhard">
<code class="descclassname">histomicstk.preprocessing.color_normalization.</code><code class="descname">reinhard</code><span class="sig-paren">(</span><em>im_src</em>, <em>target_mu</em>, <em>target_sigma</em>, <em>src_mu=None</em>, <em>src_sigma=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/histomicstk/preprocessing/color_normalization/reinhard.html#reinhard"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#histomicstk.preprocessing.color_normalization.reinhard" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs Reinhard color normalization to transform the color
characteristics of an image to a desired standard.</p>
<p>The standard is defined by the mean and standard deviations of the target
image in LAB color space defined by Ruderman. The input image is converted
to Ruderman’s LAB space, the LAB channels are each centered and scaled to
zero-mean unit variance, and then rescaled and shifted to match the target
image statistics. If the LAB statistics for the input image are provided
(<cite>src_mu</cite> and <cite>src_sigma</cite>) then these will be used for normalization,
otherwise they will be derived from the input image <cite>im_src</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>im_src</strong> (<em>array_like</em>) – An RGB image</li>
<li><strong>target_mu</strong> (<em>array_like</em>) – A 3-element array containing the means of the target image channels
in LAB color space.</li>
<li><strong>target_sigma</strong> (<em>array_like</em>) – A 3-element array containing the standard deviations of the target
image channels in LAB color space.</li>
<li><strong>src_mu</strong> (<em>array_like</em><em>, </em><em>optional</em>) – A 3-element array containing the means of the source image channels in
LAB color space. Used with reinhard_stats for uniform normalization of
tiles from a slide.</li>
<li><strong>src_sigma</strong> (<em>array</em><em>, </em><em>optional</em>) – A 3-element array containing the standard deviations of the source
image channels in LAB color space. Used with reinhard_stats for
uniform normalization of tiles tiles from a slide.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>im_normalized</strong> – Color Normalized RGB image</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">array_like</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="histomicstk.preprocessing.color_conversion.html#histomicstk.preprocessing.color_conversion.rgb_to_lab" title="histomicstk.preprocessing.color_conversion.rgb_to_lab"><code class="xref py py-func docutils literal notranslate"><span class="pre">histomicstk.preprocessing.color_conversion.rgb_to_lab()</span></code></a>, <a class="reference internal" href="histomicstk.preprocessing.color_conversion.html#histomicstk.preprocessing.color_conversion.lab_to_rgb" title="histomicstk.preprocessing.color_conversion.lab_to_rgb"><code class="xref py py-func docutils literal notranslate"><span class="pre">histomicstk.preprocessing.color_conversion.lab_to_rgb()</span></code></a></p>
</div>
<p class="rubric">References</p>
<table class="docutils footnote" frame="void" id="id1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>E. Reinhard, M. Adhikhmin, B. Gooch, P. Shirley, “Color transfer
between images,” in IEEE Computer Graphics and Applications, vol.21,
no.5,pp.34-41, 2001.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td>D. Ruderman, T. Cronin, and C. Chiao, “Statistics of cone responses
to natural images: implications for visual coding,” J. Opt. Soc. Am. A
vol.15, pp.2036-2045, 1998.</td></tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="histomicstk.preprocessing.color_normalization.reinhard_stats">
<code class="descclassname">histomicstk.preprocessing.color_normalization.</code><code class="descname">reinhard_stats</code><span class="sig-paren">(</span><em>slide_path</em>, <em>sample_fraction</em>, <em>magnification=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/histomicstk/preprocessing/color_normalization/reinhard_stats.html#reinhard_stats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#histomicstk.preprocessing.color_normalization.reinhard_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Samples a whole-slide-image to determine colorspace statistics (mean,
variance) needed to perform global Reinhard color normalization.</p>
<p>Normalizing individual tiles independently creates a significant bias
in the results of segmentation and feature extraction, as the color
statistics of each tile in a whole-slide image can vary significantly.
To remedy this, we sample a subset of pixels from the entire whole-slide
image in order to estimate the global mean and standard deviation of
each channel in the Lab color space that are needed for reinhard color
normalization.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>slide_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – path and filename of slide.</li>
<li><strong>sample_fraction</strong> (<em>double</em>) – Fraction of pixels to sample (range (0, 1]).</li>
<li><strong>magnification</strong> (<em>scalar</em>) – Desired magnification for sampling. Defaults to native scan
magnification.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>Mu</strong> (<em>array_like</em>) – A 3-element array containing the means of the target image channels
in sample_pix_lab color space.</li>
<li><strong>Sigma</strong> (<em>array_like</em>) – A 3-element list containing the standard deviations of the target image
channels in sample_pix_lab color space.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Returns a namedtuple.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="histomicstk.preprocessing.color_conversion.html#histomicstk.preprocessing.color_conversion.lab_mean_std" title="histomicstk.preprocessing.color_conversion.lab_mean_std"><code class="xref py py-func docutils literal notranslate"><span class="pre">histomicstk.preprocessing.color_conversion.lab_mean_std()</span></code></a>, <a class="reference internal" href="#histomicstk.preprocessing.color_normalization.reinhard" title="histomicstk.preprocessing.color_normalization.reinhard"><code class="xref py py-func docutils literal notranslate"><span class="pre">histomicstk.preprocessing.color_normalization.reinhard()</span></code></a></p>
</div>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="histomicstk.filters.html" class="btn btn-neutral float-right" title="histomicstk.filters" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="histomicstk.preprocessing.color_deconvolution.html" class="btn btn-neutral" title="histomicstk.preprocessing.color_deconvolution" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Kitware, Inc..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>